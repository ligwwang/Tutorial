<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>作业08第17题</title>
        <style media="screen">
                .msg-error {
                    color: red
                }
        </style>
    </head>
    <body>
        <div id="id-div-container">
            <input id="id-input-name" type="text">
            <button id='id-botton-login' type="button">登录</button>
        </div>
        <script>
            var button = document.querySelector('#id-botton-login')
            button.addEventListener('click', function() {
                var input = document.querySelector('#id-input-name')
                var name = input.value
                if (validate(name)) {
                    console.log('检查合格')
                } else {
                    insertError()
                }
            })

            var validate = function(s) {
                letters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'
                digits = '1234567890'
                chars = letters + digits + '_'
                var validatechar = true
                if (!chars.includes(s)) {
                    validatechar = false
            }

            // 第一位是字母
            var validateHead = letters.includes(s[0])
            // 结尾是字母或数字
            var validateTail = s[s.length-1] != '-'
            // 检查长度
            var validateLength = s.length >=2 && s.length <= 10
            return validatechar && validateHead && validateTail && validateLength
            }

            var insertError = function() {
                container = document.querySelector('#id-div-container')
                var msg = '<h1 class="msg-error">登录错误<h1>'
                container.insertAdjacentHTML('beforeend', msg)
            }
        </script>
    </body>
</html>
